<!DOCTYPE html>
<html lang="de">
<head>
    <!-- Standard Favicons -->
<link rel="icon" type="image/png" sizes="192x192" href="icon-192x192.png">
<link rel="icon" type="image/png" sizes="512x512" href="icon-512x512.png">

<!-- Apple Touch Icons -->
<link rel="apple-touch-icon" sizes="120x120" href="icon-120.png">
<link rel="apple-touch-icon" sizes="152x152" href="icon-152.png">
<link rel="apple-touch-icon" sizes="167x167" href="icon-167.png">
<link rel="apple-touch-icon" sizes="180x180" href="icon-180.png">

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>SKT Success Dashboard</title>
    
    <!-- PWA Manifest & Theme Color -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#002147">

    <!-- Tailwind CSS CDN für schnelle und responsive Stile -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome für Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <!-- NEU: Quill Rich Text Editor -->
    <link href="https://cdn.quilljs.com/1.3.7/quill.snow.css" rel="stylesheet">
    <!-- NEU: Eigene Stile für Quill, um das Theme anzupassen -->
    <link rel="stylesheet" href="quill-custom.css">
    <link rel="stylesheet" href="style.css">
</head>
<body class="flex flex-col min-h-screen text-skt-blue">
    <!-- Pull-to-Refresh Indikator -->
    <div id="refresh-indicator" class="fixed top-0 left-0 right-0 flex justify-center pt-3 opacity-0 transition-opacity duration-300 z-40">
        <div class="bg-white rounded-full shadow-lg h-10 w-10 flex items-center justify-center">
            <i class="fas fa-sync-alt text-skt-blue transition-transform duration-200"></i>
        </div>
    </div>

    <!-- Auswahlbereich für Benutzer -->
    <div id="user-select-screen" class="hidden flex-col items-center justify-start min-h-screen bg-gray-100 p-4 pt-16 sm:pt-24">
        <div class="w-full max-w-sm bg-white p-8 rounded-2xl shadow-xl border border-gray-200 text-center transform transition-transform duration-300 hover:scale-105">
            <div class="mb-6">
                <h1 class="text-3xl font-extrabold text-skt-blue leading-tight">Willkommen zurück!</h1>
                <p class="text-gray-500 mt-2">Wähle deinen Namen, um fortzufahren.</p>
            </div>
            <div class="mb-6">
                <div class="relative">
                    <select id="user-dropdown-select" class="block w-full px-4 py-3 rounded-xl border-2 border-gray-300 bg-white text-lg text-gray-700 appearance-none transition-colors duration-200 focus:border-skt-blue-main focus:ring-2 focus:ring-skt-blue-main focus:outline-none pr-10 cursor-pointer">
                        <option value="">Benutzer wählen ...</option>
                    </select>
                    <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-4 text-gray-500">
                        <svg class="h-5 w-5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd" /></svg>
                    </div>
                </div>
            </div>
            <div id="password-container" class="hidden mb-6">
                <input type="password" id="password-input" placeholder="Passwort" class="block w-full px-4 py-3 rounded-xl border-2 border-gray-300 bg-white text-lg text-gray-700 transition-colors duration-200 focus:border-skt-blue-main focus:ring-2 focus:ring-skt-blue-main focus:outline-none">
            </div>
            <button id="start-dashboard-btn" class="hidden w-full bg-skt-blue text-white font-semibold py-3 rounded-xl hover:bg-skt-blue-light transition-colors duration-200 shadow-md transform hover:-translate-y-0.5 active:translate-y-0 text-lg">Dashboard laden</button>
            <p id="user-select-error" class="text-red-600 mt-4 h-5 text-sm"></p>
        </div>
    </div>

    <!-- Dashboard-Container -->
    <div id="dashboard-content" class="hidden flex-col min-h-screen">
        <header class="w-full bg-skt-blue relative rounded-b-3xl z-50">
            <!-- KORREKTUR: `relative` und `z-10` stellen sicher, dass der Inhalt über dem absolut positionierten Video liegt. `lg:pr-56` schafft Platz für das Video. -->
            <div class="max-w-7xl mx-auto flex flex-col sm:flex-row items-end justify-between gap-x-8 gap-y-4 relative z-10 p-4 md:p-6 lg:pr-56">
                <div class="flex flex-col">
                    <h1 class="text-4xl sm:text-5xl font-bold font-times-new-roman text-white mb-2" id="welcome-header">Willkommen,</h1>
                    <p id="user-position" class="text-lg text-gold font-bold"></p>
                    <p class="text-lg sm:text-xl text-white mt-2">Dein persönliches Dashboard für Erfolg und Karriereplanung.</p>
                </div>
                <!-- KORREKTUR: Button-Container ist jetzt ein einfacher Flex-Container ohne spezielle Abstände. -->
                <div class="relative flex items-center space-x-2 pb-1">
                    <button id="back-button" class="hidden bg-skt-blue-light text-white font-semibold py-2 px-4 rounded-lg shadow-md hover:bg-skt-blue-main transition-colors h-10 w-10 flex items-center justify-center" title="Zurück">
                        <i class="fas fa-arrow-left"></i>
                    </button>
                    <button id="dashboard-header-btn" class="bg-skt-blue-light text-white font-semibold py-2 px-4 rounded-lg shadow-md hover:bg-skt-blue-main transition-colors h-10 w-10 flex items-center justify-center" title="Dashboard">
                        <i class="fas fa-tachometer-alt"></i>
                    </button>
                    <button id="einarbeitung-btn" class="bg-skt-blue-light text-white font-semibold py-2 px-4 rounded-lg shadow-md hover:bg-skt-blue-main transition-colors h-10 w-10 flex items-center justify-center" title="Einarbeitung">
                        <i class="fas fa-graduation-cap"></i>
                    </button>
                    <!-- NEU: Termin-Button im Header -->
                    <button id="appointments-header-btn" class="bg-skt-blue-light text-white font-semibold py-2 px-4 rounded-lg shadow-md hover:bg-skt-blue-main transition-colors h-10 w-10 flex items-center justify-center" title="Termine verwalten">
                        <i class="fas fa-calendar-alt"></i>
                    </button>
                    <!-- NEU: Umsatz-Button im Header -->
                    <button id="umsatz-header-btn" class="bg-skt-blue-light text-white font-semibold py-2 px-4 rounded-lg shadow-md hover:bg-skt-blue-main transition-colors h-10 w-10 flex items-center justify-center" title="Umsätze">
                        <i class="fas fa-chart-line"></i>
                    </button>
                    <!-- Stimmungsdashboard-Button im Header (sichtbar ab sm) -->
                    <button id="stimmungs-dashboard-header-btn" class="hidden sm:flex bg-skt-blue-light text-white font-semibold py-2 px-4 rounded-lg shadow-md hover:bg-skt-blue-main transition-colors h-10 w-10 items-center justify-center" title="Stimmungsdashboard">
                        <i class="fas fa-smile-beam"></i>
                    </button>
                    <!-- Strukturbaum-Button im Header (sichtbar ab sm) - TEMPORÄR AUSGEBLENDET -->
                    <!-- <button id="strukturbaum-header-btn" class="hidden sm:flex bg-skt-blue-light text-white font-semibold py-2 px-4 rounded-lg shadow-md hover:bg-skt-blue-main transition-colors h-10 w-10 items-center justify-center" title="Strukturbaum">
                        <i class="fas fa-sitemap"></i>
                    </button> -->
                    <!-- NEU: Planungs-Button im Header -->
                    <button id="planung-header-btn" class="hidden sm:flex bg-skt-blue-light text-white font-semibold py-2 px-4 rounded-lg shadow-md hover:bg-skt-blue-main transition-colors h-10 w-10 items-center justify-center" title="Planung & Vision">
                        <i class="fas fa-tasks"></i>
                    </button>
                    <!-- NEU: Potential-Button im Header (wiederhergestellt) -->
                    <button id="potential-header-btn" class="hidden sm:flex bg-skt-blue-light text-white font-semibold py-2 px-4 rounded-lg shadow-md hover:bg-skt-blue-main transition-colors h-10 w-10 items-center justify-center" title="Potentiale">
                        <i class="fas fa-users"></i>
                    </button>
                    <!-- Folgende Buttons werden auf kleinen Bildschirmen in einem Menü zusammengefasst -->
                    <button id="pg-tagebuch-header-btn" class="hidden sm:flex bg-skt-blue-light text-white font-semibold py-2 px-4 rounded-lg shadow-md hover:bg-skt-blue-main transition-colors h-10 w-10 items-center justify-center" title="PG-Tagebuch">
                        <i class="fas fa-comments"></i>
                    </button>
                    <button id="auswertung-header-btn" class="hidden sm:flex bg-skt-blue-light text-white font-semibold py-2 px-4 rounded-lg shadow-md hover:bg-skt-blue-main transition-colors h-10 w-10 items-center justify-center" title="Auswertungen">
                        <i class="fas fa-trophy"></i>
                    </button>
                    <!-- NEU: Wrapper für Wettbewerb-Button mit "Neu!"-Label -->
                    <div id="wettbewerb-header-btn-wrapper" class="relative">
                        <span class="absolute -top-2 -right-2 bg-accent-gold text-skt-blue text-xs font-bold px-1.5 py-0.5 rounded-full shadow-md z-10">Neu!</span>
                        <button id="wettbewerb-header-btn" class="bg-skt-blue-light text-white font-semibold py-2 px-4 rounded-lg shadow-md hover:bg-skt-blue-main transition-colors h-10 w-10 flex items-center justify-center" title="Wettbewerb">
                            <i class="fas fa-plane-departure text-gold"></i>
                        </button>
                    </div>
                    <!-- NEU: "Mehr"-Menü für kleine Bildschirme -->
                    <div class="relative sm:hidden">
                        <button id="more-tools-btn" class="bg-skt-blue-light text-white font-semibold py-2 px-4 rounded-lg shadow-md hover:bg-skt-blue-main transition-colors h-10 w-10 flex items-center justify-center" title="Weitere Werkzeuge">
                            <i class="fas fa-ellipsis-v"></i>
                        </button>
                        <div id="more-tools-menu" class="dropdown-menu hidden z-50">
                                <a href="#" id="pg-tagebuch-menu-item" class="block px-4 py-2 text-sm text-skt-blue hover:bg-skt-grey-light"><i class="fas fa-comments w-5 mr-2"></i>PG-Tagebuch</a>
                                <a href="#" id="potential-menu-item" class="block px-4 py-2 text-sm text-skt-blue hover:bg-skt-grey-light"><i class="fas fa-users w-5 mr-2"></i>Potentiale</a>
                                <a href="#" id="auswertung-menu-item" class="block px-4 py-2 text-sm text-skt-blue hover:bg-skt-grey-light"><i class="fas fa-trophy w-5 mr-2"></i>Auswertung</a>
                                <a href="#" id="planung-menu-item" class="block sm:hidden px-4 py-2 text-sm text-skt-blue hover:bg-skt-grey-light"><i class="fas fa-tasks w-5 mr-2"></i>Planung & Vision</a>
                                <a href="#" id="stimmungs-dashboard-menu-item" class="hidden px-4 py-2 text-sm text-skt-blue hover:bg-skt-grey-light flex items-center" title="Stimmungsdashboard"><i class="fas fa-smile-beam w-5 mr-2"></i>Stimmungsdashboard</a>
                                <!-- TEMPORÄR AUSGEBLENDET: <a href="#" id="strukturbaum-menu-item" class="block sm:hidden px-4 py-2 text-sm text-skt-blue hover:bg-skt-grey-light"><i class="fas fa-sitemap w-5 mr-2"></i>Strukturbaum</a> -->
                        </div>
                    </div>
                    <div class="relative">
                        <button id="settings-btn" class="bg-skt-blue-light text-white font-semibold py-2 px-4 rounded-lg shadow-md hover:bg-skt-blue-main transition-colors h-10 w-10 flex items-center justify-center" title="Einstellungen">
                            <i class="fas fa-cog"></i>
                        </button>
                        <div id="settings-menu" class="dropdown-menu hidden">
                                <a href="#" id="superuser-btn" class="hidden block px-4 py-2 text-sm text-skt-blue hover:bg-skt-grey-light"><i class="fas fa-users-cog w-5 mr-2"></i>Gesamtansicht</a>
                                <a href="#" id="money-view-btn" class="block px-4 py-2 text-sm text-skt-blue hover:bg-skt-grey-light"><i class="fas fa-euro-sign w-5 mr-2"></i>Geld-Ansicht</a>
                                <a href="#" id="edit-user-btn" class="block px-4 py-2 text-sm text-skt-blue hover:bg-skt-grey-light"><i class="fas fa-user-edit w-5 mr-2"></i>Personendaten</a>
                                <a href="#" id="team-planung-btn" class="hidden block px-4 py-2 text-sm text-skt-blue hover:bg-skt-grey-light"><i class="fas fa-clipboard-list w-5 mr-2"></i>Team-Planung</a>
                                <a href="#" id="workingday-auswertung-btn" class="hidden block px-4 py-2 text-sm text-skt-blue hover:bg-skt-grey-light"><i class="fas fa-calendar-week w-5 mr-2"></i>WorkingDay Auswertung</a>
                                <a href="#" id="help-btn" class="block px-4 py-2 text-sm text-skt-blue hover:bg-skt-grey-light"><i class="fas fa-question-circle w-5 mr-2"></i>Hilfe</a>
                                <a href="#" id="add-new-user-btn" class="block px-4 py-2 text-sm text-skt-blue hover:bg-skt-grey-light"><i class="fas fa-user-plus w-5 mr-2"></i>Neuer Nutzer</a>
                                <a href="#" id="datenschutz-header-btn" class="block px-4 py-2 text-sm text-skt-blue hover:bg-skt-grey-light"><i class="fas fa-shield-alt w-5 mr-2"></i>Datenschutz</a>                             <a href="#" id="time-travel-btn" class="block px-4 py-2 text-sm text-skt-blue hover:bg-skt-grey-light"><i class="fas fa-clock-rotate-left w-5 mr-2"></i>Zeitreise</a>
                                <a href="#" id="clear-cache-btn" class="block px-4 py-2 text-sm text-skt-blue hover:bg-skt-grey-light"><i class="fas fa-right-from-bracket w-5 mr-2"></i>Logout</a>
                        </div>
                    </div>
                </div>
            </div>
            <!-- KORREKTUR: Video wieder absolut positioniert, um die volle Höhe zu nutzen und Flackern zu vermeiden. -->
            <div id="header-animation-container" class="hidden lg:block absolute right-6 top-0 h-full z-0 cursor-pointer" title="Frag den Adler">
                <video id="header-animation-video" autoplay muted playsinline class="h-full w-auto video-filter-normal">
                    <source id="header-animation-source" src="./Normal.mp4" type="video/mp4">
                </video>
            </div>
        </header>

        <!-- NEU: Zeitreise-Banner -->
        <div id="time-travel-banner" class="hidden bg-accent-purple text-white p-3 text-center font-semibold shadow-md z-40">
            <p>Zeitreise aktiv: <span id="time-travel-date-display"></span> <button id="reset-time-travel-btn" class="ml-4 font-bold underline hover:text-yellow-300">Zurück in die Gegenwart</button></p>
        </div>

        <!-- Hauptansicht für Dashboard -->
        <main id="main-dashboard-view" class="flex flex-col w-full max-w-7xl mx-auto px-6 md:px-8 pt-2 md:pt-4 pb-6 space-y-6 overflow-hidden">
            <!-- NEU: Banner für kritische Einarbeitungsschritte -->
            <div id="critical-onboarding-banner" class="hidden my-6 p-4 bg-red-100 border-l-4 border-skt-red-accent text-red-800 rounded-lg shadow-md">
                <div class="flex">
                    <div class="py-1"><i class="fas fa-exclamation-triangle fa-lg mr-4"></i></div>
                    <div>
                        <h4 class="font-bold text-lg">Kritische Einarbeitungsschritte überfällig!</h4>
                        <p class="text-sm mb-3">Bei den folgenden Mitarbeitern sind kritische Einarbeitungsschritte überfällig. Bitte kümmere dich darum.</p>
                        <div id="critical-onboarding-list" class="space-y-2"></div>
                    </div>
                </div>
            </div>

            <!-- NEU: Banner für den Freitags-Check-in -->
            <div id="friday-checkin-banner" class="hidden my-6 p-4 bg-skt-blue text-white rounded-xl shadow-lg flex justify-between items-center cursor-pointer hover:bg-skt-blue-light transition-colors">
                <div>
                    <h4 class="font-bold text-lg">Working Day</h4>
                    <p>Zeit, deine Woche zu reflektieren und die Weichen für den Erfolg zu stellen.</p>
                </div>
                <i class="fas fa-arrow-right text-2xl"></i>
            </div>


            <div id="notification-prompt" class="hidden bg-skt-blue-light text-white p-4 rounded-lg shadow-md flex justify-between items-center">
                <p>Möchtest du über wichtige Updates benachrichtigt werden?</p>
                <button id="enable-notifications-btn" class="bg-white text-skt-blue font-bold py-2 px-4 rounded-lg hover:bg-gray-200 transition-colors">Aktivieren</button>
            </div>

            <div id="status-message" class="flex flex-col items-center justify-center text-center text-lg font-semibold text-skt-blue mt-6">
                <div class="loader mb-4"></div><p id="status-text">Daten werden geladen...</p>
            </div>

            <div id="dashboard-sections" class="space-y-12 opacity-0 transition-opacity duration-500">
                <section id="monthly-planning-view" class="bg-white rounded-2xl p-6 md:p-8 shadow-lg">
                    <div class="flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4 mb-6">
                        <h2 id="monthly-planning-title" class="text-2xl font-semibold text-skt-blue text-center sm:text-left">Monatsplanung</h2>
                        <div id="planning-view-toggle" class="view-toggle hidden flex w-full sm:w-auto space-x-2">
                            <button id="struktur-view-btn" class="flex-1">Struktur</button>
                            <button id="team-view-btn" class="active flex-1">Gruppe</button>
                            <button id="personal-view-btn" class="flex-1">Persönlich</button>
                        </div>
                    </div>
                    <div class="mb-8"><div id="weekly-progress-container" class="w-full flex relative h-5 mb-4 items-end"></div></div>
                    <div class="flex flex-col md:flex-row items-center justify-between gap-8 mb-8">
                        <div class="flex-grow md:w-1/2 relative w-full h-auto max-w-sm max-h-sm">
                            <svg class="progress-circle-monthly w-full h-full" viewBox="0 0 100 100">
                                <circle class="bg-circle" cx="50" cy="50" r="45"></circle>
                                <circle class="progress-arc-eh" cx="50" cy="50" r="45" id="progress-circle-eh"></circle>
                                
                                <circle class="prognosis-bg-circle" cx="50" cy="50" r="35"></circle>
                                <circle class="prognosis-arc-eh" cx="50" cy="50" r="35" id="prognosis-circle-eh"></circle>

                                <g id="segment-dividers-eh"></g>
                            </svg>
                            <div class="absolute inset-0 flex items-center justify-center flex-col text-center">
                                <p class="text-xl sm:text-2xl lg:text-3xl font-bold text-skt-green-accent">
                                    <span id="eh-center-current">0</span> / <span id="eh-center-goal">0</span>
                                </p>
                                <p id="eh-center-unit-label" class="text-sm text-gray-500">Einheiten erreicht</p>
                                <p class="text-lg font-bold text-skt-yellow-accent mt-2">
                                    <span id="eh-soll-value">0</span>
                                </p>
                                <p id="eh-soll-unit-label" class="text-xs text-gray-500">Soll Einheiten</p>
                            </div>
                        </div>
                        <div class="flex-grow md:w-1/2 flex flex-col gap-8 w-full justify-center">
                            <div class="p-4 bg-skt-grey-light rounded-xl shadow-md text-center">
                                <p class="text-sm font-semibold text-skt-blue mb-2">Analysetermine</p>
                                <p class="text-lg font-bold text-skt-blue" id="appointments-text">0 / 0 / 0</p>
                                <p class="text-xs mb-2">
                                    <span class="font-semibold" style="color: var(--color-accent-green);">Gehalten</span> / 
                                    <span class="font-semibold" style="color: var(--color-skt-blue-main);">Vereinbart</span> / 
                                    <span class="font-semibold" style="color: var(--color-accent-red);">Soll</span>
                                </p>
                                <div id="appointments-progress-bar" class="w-full bg-accent-red-light h-3 rounded-full overflow-hidden relative">
                                    <div id="appointments-vereinbart-bar" class="h-full bg-skt-blue-accent absolute top-0 left-0 transition-all duration-700 ease-out" style="width: 0%;"></div>
                                    <div id="appointments-gehalten-bar" class="h-full bg-skt-green-accent absolute top-0 left-0 transition-all duration-700 ease-out" style="width: 0%;"></div>
                                </div>
                            </div>
                            <!-- UPDATE: Bewerbungsgespräche mit Balken -->
                            <div class="p-4 bg-accent-gold-light rounded-xl shadow-md border-2 border-accent-gold text-center">
                                <p class="text-sm text-skt-blue-light font-bold mb-2" data-tooltip="Fortschritt deiner ausgemachten Einstellungstermine.">Einstellungstermine</p>
                                <p class="text-xl font-bold text-skt-blue mb-4"><span id="et-current">0</span> / <span id="et-goal">0</span></p>
                                <div id="interviews-progress-wrapper" class="w-full bg-skt-grey-medium h-3 rounded-full overflow-hidden relative">
                                    <div id="interviews-progress-bar" class="h-full bg-skt-green-accent absolute top-0 left-0 transition-all duration-700 ease-out" style="width: 0%;"></div>
                                </div>
                                <p id="next-info-date" class="text-sm text-skt-blue-light mt-3"></p>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- NEU: Planungsqualitätsquote (PQQ) - jetzt klickbar -->
                <section id="pqq-view" class="hidden bg-white rounded-2xl p-6 md:p-8 shadow-lg cursor-pointer">
                    <div class="flex justify-between items-center">
                        <h2 class="text-2xl font-semibold text-skt-blue mb-2">Planungsqualitätsquote (PQQ)</h2>
                        <i id="pqq-chevron" class="fas fa-chevron-down text-skt-blue-light transition-transform duration-300"></i>
                    </div>
                    <p class="text-sm text-gray-500 mb-6">Erfüllungsquote deiner ursprünglichen Ziele des Vormonats.</p>
                    <div class="w-full max-w-xl mx-auto">
                        <div id="pqq-gauge" class="relative h-8 rounded-full">
                            <div id="pqq-bar" class="h-full rounded-full pqq-gauge-bar"></div>
                            <div id="pqq-indicator" class="absolute top-0 h-full flex items-center" style="left: 50%;">
                                <div class="w-1 h-10 bg-skt-blue rounded-full shadow-md"></div>
                            </div>
                            <div id="pqq-value-display" class="absolute text-skt-blue font-bold" style="left: 50%;"></div>
                        </div>
                        <div class="flex justify-between text-xs font-semibold text-gray-500 mt-2 px-1">
                            <span>0%</span>
                            <span>100%</span>
                            <span>200%</span>
                        </div>
                    </div>
                    <!-- NEU: Detail-Container -->
                    <div id="pqq-details-container" class="pqq-details-collapsible collapsed mt-8 space-y-6">
                        <!-- EH Quote -->
                        <div>
                            <h3 class="text-lg font-semibold text-skt-blue mb-2">EH-Quote</h3>
                            <div class="w-full max-w-xl mx-auto">
                                <div class="relative h-8 rounded-full">
                                    <div class="h-full rounded-full" style="background: linear-gradient(to right, var(--color-accent-red), var(--color-accent-green) 50%, var(--color-accent-gold));"></div>
                                    <div id="pqq-eh-indicator" class="absolute top-0 h-full flex items-center" style="left: 50%;">
                                        <div class="w-1 h-10 bg-skt-blue rounded-full shadow-md"></div>
                                    </div>
                                    <div id="pqq-eh-value-display" class="absolute text-skt-blue font-bold" style="left: 50%;"></div>
                                </div>
                                <div class="flex justify-between text-xs font-semibold text-gray-500 mt-2 px-1"><span>0%</span><span>100%</span><span>200%</span></div>
                            </div>
                        </div>
                        <!-- ET Quote -->
                        <div>
                            <h3 class="text-lg font-semibold text-skt-blue mb-2">ET-Quote</h3>
                            <div class="w-full max-w-xl mx-auto">
                                <div class="relative h-8 rounded-full">
                                    <div class="h-full rounded-full" style="background: linear-gradient(to right, var(--color-accent-red), var(--color-accent-green) 50%, var(--color-accent-gold));"></div>
                                    <div id="pqq-et-indicator" class="absolute top-0 h-full flex items-center" style="left: 50%;">
                                        <div class="w-1 h-10 bg-skt-blue rounded-full shadow-md"></div>
                                    </div>
                                    <div id="pqq-et-value-display" class="absolute text-skt-blue font-bold" style="left: 50%;"></div>
                                </div>
                                <div class="flex justify-between text-xs font-semibold text-gray-500 mt-2 px-1"><span>0%</span><span>100%</span><span>200%</span></div>
                            </div>
                        </div>
                    </div>
                </section>

                <section id="employee-view" class="bg-white rounded-2xl p-6 md:p-8 shadow-lg">
                    <h2 class="text-2xl font-semibold text-skt-blue mb-6 text-center">Dein aktueller Fortschritt</h2>
                    <!-- NEU: Einarbeitungs-Banner -->
                    <div id="einarbeitung-banner" class="hidden mb-6 p-4 bg-skt-blue-light text-white rounded-xl shadow-lg flex justify-between items-center cursor-pointer hover:bg-skt-blue transition-colors">
                        <div>
                            <p class="font-bold text-lg">Neuer Mitarbeiter? Starte hier!</p>
                            <p>Verfolge deine Einarbeitungsschritte und starte erfolgreich durch.</p>
                        </div>
                        <i class="fas fa-arrow-right text-2xl"></i>
                    </div>

                    <div id="tier-cards-container" class="grid grid-cols-1 md:grid-cols-4 gap-6">
                        <div id="tier-1-card" class="tier-card active"><h3 class="text-2xl font-bold mb-2 text-skt-blue">T1</h3><p class="text-sm text-skt-blue-light mb-4">0 EH</p><div class="w-full bg-skt-grey-light h-2 rounded-full overflow-hidden"><div id="tier-1-progress" class="h-full bg-skt-green-accent transition-all duration-700 ease-out" style="width: 100%;"></div></div></div>
                        <div id="tier-2-card" class="tier-card"><h3 class="text-2xl font-bold mb-2 text-skt-blue">T2</h3><p class="text-sm text-skt-blue-light mb-4">1.250 EH</p><div class="w-full bg-skt-grey-light h-2 rounded-full overflow-hidden"><div id="tier-2-progress" class="h-full bg-skt-green-accent transition-all duration-700 ease-out" style="width: 0%;"></div></div></div>
                        <div id="tier-3-card" class="tier-card"><h3 class="text-2xl font-bold mb-2 text-skt-blue">T3</h3><p class="text-sm text-skt-blue-light mb-4">2.500 EH</p><div class="w-full bg-skt-grey-light h-2 rounded-full overflow-hidden"><div id="tier-3-progress" class="h-full bg-skt-green-accent transition-all duration-700 ease-out" style="width: 0%;"></div></div></div>
                        <div id="tier-gst-card" class="tier-card"><h3 class="text-2xl font-bold mb-2 text-skt-blue">Junior GST</h3><p class="text-sm text-skt-blue-light mb-4">4.000 EH</p><div class="w-full bg-skt-grey-light h-2 rounded-full overflow-hidden"><div id="tier-gst-progress" class="h-full bg-skt-green-accent transition-all duration-700 ease-out" style="width: 0%;"></div></div></div>
                    </div>
                    <div class="flex flex-col md:flex-row items-center justify-between gap-8 mt-8">
                        <div class="flex-grow md:w-1/2 relative w-full h-auto max-w-96 max-h-96">
                            <svg class="progress-circle w-full h-full" viewBox="0 0 100 100">
                                <circle class="bg-circle" cx="50" cy="50" r="40"></circle><circle class="progress-arc" cx="50" cy="50" r="40" id="progress-circle-career"></circle>
                            </svg>
                            <div class="absolute inset-0 flex items-center justify-center flex-col text-center">
                                <p id="career-progress-percentage" class="text-3xl sm:text-4xl lg:text-5xl font-bold text-skt-blue">0%</p><p class="text-sm text-skt-blue-light mt-1" id="progress-to-next-text">Fortschritt zum ...</p>
                            </div>
                        </div>
                        <div class="flex-grow md:w-1/2 grid grid-cols-1 md:grid-cols-2 gap-4 w-full">
                            <div class="p-3 md:p-4 bg-skt-grey-light rounded-xl shadow-md flex flex-col items-center justify-center text-center min-h-[120px] md:min-h-[140px]">
                                <p id="eh-value-title" class="text-[10px] sm:text-xs text-skt-blue-light font-bold leading-tight" data-tooltip="Deine gesamten erreichten Einheiten">
                                    Erreichte EH (insgesamt)
                                </p>
                                <div class="flex items-center justify-center h-full mt-1 md:mt-0">
                                    <p id="eh-value-display" class="text-xl sm:text-2xl md:text-3xl font-bold text-skt-blue"><span id="current-eh-display">0</span><span id="eh-value-unit" class="text-base sm:text-xl md:text-2xl"> EH</span></p><i id="eh-checkmark" class="fas fa-check-circle text-3xl sm:text-4xl md:text-5xl text-green-500 hidden"></i>
                                </div>
                            </div>
                            <!-- NEU: Design an ET-Box angepasst und Container für zusätzliche Infos hinzugefügt -->
                            <div class="p-3 md:p-4 bg-skt-grey-light rounded-xl shadow-md flex flex-col items-center justify-center text-center min-h-[120px] md:min-h-[140px]">
                                <p id="next-career-goal-label" class="text-[10px] sm:text-xs text-skt-blue-light font-bold leading-tight">Nächstes Karriereziel</p>
                                <div id="employee-info-container" class="mt-1 flex flex-col items-center justify-center">
                                    <p class="text-xl sm:text-2xl md:text-3xl font-bold text-skt-blue" id="employee-count-display">0</p><p id="employee-goal-status" class="text-skt-blue-light text-xs sm:text-sm mt-1 truncate max-w-full px-1">...</p>
                                </div>
                                <div id="employee-slots-container" class="flex flex-wrap justify-center gap-1 sm:gap-2 mt-2 max-w-full"></div>
                            </div>
                            <div id="employee-additional-info-container" class="hidden p-4 col-span-2 bg-accent-gold-light rounded-xl shadow-md border-2 border-accent-gold text-center">
                                <!-- Inhalt wird per JS generiert -->
                            </div>
                        </div>
                    </div>
                </section>

                <section id="leadership-view" class="hidden bg-white rounded-2xl p-6 md:p-8 shadow-lg">
                    <div id="leader-personal-goal-container" class="mb-8"></div>
                    <div class="flex flex-col sm:flex-row justify-between items-center mb-4 gap-4">
                        <h2 id="leadership-view-title" class="text-2xl font-semibold text-skt-blue">Deine Struktur-Übersicht</h2>
                        <div id="leadership-view-mode-toggle" class="view-toggle flex space-x-2">
                            <button id="grid-view-btn" title="Kachelansicht"><i class="fas fa-th-large"></i></button>
                            <button id="list-view-btn" class="active" title="Listenansicht"><i class="fas fa-bars"></i></button>
                        </div>
                    </div>
                    <p id="leadership-view-count" class="text-center sm:text-left text-skt-blue-light mb-8"></p>
                    <div id="team-members-container" class="mt-6"></div>
                    <div id="passive-members-section" class="mt-8"></div>
                </section>
            </div>          
        </main>

        <!-- NEU: Ansicht für Einarbeitung -->
    <main id="einarbeitung-view" class="hidden w-full max-w-7xl mx-auto px-4 md:px-8 pt-6 pb-6">
         <div class="bg-white rounded-2xl p-6 md:p-8 shadow-lg">
              <div class="flex flex-col sm:flex-row justify-between items-center mb-8">
                  <h2 id="einarbeitung-title" class="text-3xl font-bold text-skt-blue text-center sm:text-left">Dein Einarbeitungsplan</h2>
                  <!-- NEU: Toggle für Gruppe/Struktur -->
                  <div id="onboarding-scope-toggle" class="view-toggle hidden flex w-full sm:w-auto space-x-2 mt-4 sm:mt-0">
                      <button id="onboarding-structure-btn" class="flex-1">Struktur</button>
                      <button id="onboarding-group-btn" class="active flex-1">Gruppe</button>
                  </div>
              </div>
              
              <!-- Container für die Trainee-Ansicht -->
              <div id="trainee-onboarding-view">
                  <div id="onboarding-progress-container" class="mb-8 px-2 md:px-4">
                      <div class="flex justify-between items-center mb-1">
                          <p class="font-semibold text-skt-blue">Gesamtfortschritt</p>
                          <p id="onboarding-progress-text" class="font-bold text-skt-blue">0%</p>
                      </div>
                      <div class="w-full bg-gray-200 rounded-full h-4 shadow-inner relative">
                          <div id="onboarding-soll-bar" class="bg-skt-red-accent h-4 rounded-full absolute top-0 left-0 transition-all duration-700 ease-out" style="width: 0%; z-index: 1;" data-tooltip="Soll-Fortschritt"></div>
                          <div id="onboarding-progress-bar" class="bg-skt-green-accent h-4 rounded-full absolute top-0 left-0 transition-all duration-700 ease-out" style="width: 0%; z-index: 2;" data-tooltip="Ist-Fortschritt"></div>
                      </div>
                  </div>

                      <div class="space-y-8">
                      <!-- Container Grundseminar -->
                      <div id="grundseminar-container" class="bg-skt-grey-light p-6 rounded-xl shadow-md">
                          <h3 class="text-2xl font-bold text-skt-blue mb-6 text-center">Grundseminar</h3>
                          <div class="timeline-wrapper flex gap-x-4 md:gap-x-6">
                              <div class="w-12 md:w-20 flex-shrink-0 relative pt-4 pb-4">
                                  <div class="timeline-vertical-line"></div>
                                  <div class="timeline-vertical-line-progress" id="grundseminar-progress"></div>
                                  <div class="timeline-date-markers" id="grundseminar-date-markers"></div>
                              </div>
                              <div id="grundseminar-steps-container" class="space-y-4 flex-grow"></div>
                          </div>
                  </div>
                      <!-- Container Aufbauseminar -->
                      <div id="aufbauseminar-container" class="bg-skt-grey-light p-6 rounded-xl shadow-md">
                          <h3 class="text-2xl font-bold text-skt-blue mb-6 text-center">Aufbauseminar</h3>
                          <div class="timeline-wrapper flex gap-x-4 md:gap-x-6">
                              <div class="w-12 md:w-20 flex-shrink-0 relative pt-4 pb-4">
                                  <div class="timeline-vertical-line"></div>
                                  <div class="timeline-vertical-line-progress" id="aufbauseminar-progress"></div>
                                  <div class="timeline-date-markers" id="aufbauseminar-date-markers"></div>
                              </div>
                              <div id="aufbauseminar-steps-container" class="space-y-4 flex-grow"></div>
                            </div>
                      </div>
                    </div>
                    <!-- NEU: Button für Führungskräfte -->
                    <div id="onboarding-actions-container" class="hidden mt-8 text-center">
                        <button id="complete-onboarding-btn" class="bg-skt-red-accent text-white font-semibold py-2 px-5 rounded-lg hover:bg-red-700 transition-colors">
                            <i class="fas fa-power-off mr-2"></i>Einarbeitung abschließen
                        </button>
                    </div>
                </div>

                <!-- Container für die Führungskraft-Ansicht -->
                <div id="leader-onboarding-view" class="hidden">
                    <!-- Inhalt wird per JS generiert -->
                </div>
            </div>
        </main>
        
        <!-- Container für die Termin-Ansicht -->
        <main id="appointments-view" class="hidden w-full max-w-7xl mx-auto px-4 md:px-8 pt-6 pb-6">
            <!-- Inhalt von appointments.html wird hier geladen -->
        </main>

        <!-- Container für die Potential-Ansicht -->
        <main id="potential-view" class="hidden w-full max-w-7xl mx-auto px-4 md:px-8 pt-6 pb-6">
            <!-- Inhalt von potential.html wird hier geladen -->
        </main>

        <!-- Container für die Umsatz-Ansicht -->
        <main id="umsatz-view" class="hidden w-full max-w-7xl mx-auto px-4 md:px-8 pt-6 pb-6">
            <!-- Inhalt von umsatz.html wird hier geladen -->
        </main>

        <!-- Container für die Auswertungs-Ansicht -->
        <main id="auswertung-view" class="hidden w-full max-w-7xl mx-auto px-4 md:px-8 pt-6 pb-6">
            <!-- Inhalt von auswertung.html wird hier geladen -->
        </main>

        <!-- Container für die Strukturbaum-Ansicht -->
        <main id="strukturbaum-view" class="hidden w-full max-w-7xl mx-auto px-4 md:px-8 pt-6 pb-6">
            <!-- Inhalt von strukturbaum.html wird hier geladen -->
        </main>

        <!-- Container für die PG-Tagebuch-Ansicht -->
        <main id="pg-tagebuch-view" class="hidden w-full max-w-7xl mx-auto px-4 md:px-8 pt-6 pb-6">
            <!-- Inhalt von pg-tagebuch.html wird hier geladen -->
        </main>

        <!-- Container für die Datenschutz-Ansicht -->
        <main id="datenschutz-view" class="hidden w-full max-w-7xl mx-auto px-4 md:px-8 pt-6 pb-6">
            <!-- Inhalt von datenschutz.html wird hier geladen -->
        </main>

        <!-- Container für das Stimmungsdashboard -->
        <main id="stimmungs-dashboard-view" class="hidden w-full max-w-7xl mx-auto px-4 md:px-8 pt-6 pb-6">
            <!-- Inhalt von stimmungs-dashboard.html wird hier geladen -->
        </main>

        <!-- Container für die Wettbewerb-Ansicht -->
        <main id="wettbewerb-view" class="hidden w-full max-w-7xl mx-auto flex-grow px-4 md:px-8 pt-6 pb-6">
            <!-- Inhalt von wettbewerb.html wird hier geladen -->
        </main>

        <!-- KORREKTUR: Planungs-Ansicht in den Haupt-Content verschoben und Padding entfernt -->
        <main id="planung-view" class="hidden w-full max-w-7xl mx-auto px-4 md:px-8 pb-6">
            <!-- Inhalt von planung.html wird hier geladen -->
        </main>

        <!-- NEU: Container für die Lead-Center-Ansicht (hierher verschoben) -->
        <main id="lead-center-view" class="hidden w-full max-w-7xl mx-auto px-4 md:px-8 pt-6 pb-6">
            <!-- Inhalt von lead-center.html wird hier geladen -->
        </main>

    <!-- NEU: Container für die WorkingDay-Auswertung -->
    <main id="workingday-auswertung-view" class="hidden w-full max-w-7xl mx-auto px-4 md:px-8 pt-6 pb-6">
        <!-- Inhalt von workingday-auswertung.html wird hier geladen -->
    </main>

    <!-- NEU: Container für die Beratungs-Ansicht -->
    <main id="beratung-view" class="hidden top-level-view">
        <!-- Inhalt von beratung.html wird hier geladen -->
    </main>

    <!-- NEU: Container für die Bildschirm-Ansicht.
         KORREKTUR: Das Element wird als `fixed` positioniert, um über allem zu liegen, wenn es aktiv ist.
         Der Inhalt wird dynamisch geladen. Die Klassen sorgen für den korrekten blauen Hintergrund. -->
    <div id="bildschirm-view" class="fixed inset-0 bg-skt-blue flex items-center justify-center top-level-view" style="display: none;"></div>

    <!-- NEU: Container für die Test-Ansicht -->
    <div id="test-view" class="fixed inset-0 bg-skt-blue flex items-center justify-center top-level-view" style="display: none;"></div>


    <!-- Modals -->
    <!-- Modal zum Bearbeiten/Hinzufügen von Terminen (zunächst verborgen) -->
    <div id="appointment-modal" class="modal-overlay">
        <div class="modal-box bg-white rounded-lg shadow-xl p-6 sm:p-8 m-4 sm:m-4 max-w-2xl w-full relative max-h-[90vh] overflow-y-auto">
            <!-- NEU: Lade-Overlay für Aktionen wie "Verschieben" -->
            <div id="appointment-modal-loader" class="hidden absolute inset-0 bg-white bg-opacity-80 flex-col items-center justify-center z-20">
                <div class="loader"></div>
                <p id="appointment-modal-loader-text" class="mt-4 font-semibold text-skt-blue">Wird verschoben...</p>
            </div>

            <button id="close-appointment-modal-btn" class="absolute top-2 right-3 text-2xl text-gray-500 hover:text-skt-blue">&times;</button>
            <h3 id="appointment-modal-title" class="text-xl sm:text-2xl font-bold text-skt-blue mb-4 sm:mb-6">Termin anlegen</h3>
            <!-- NEU: Container für Hinweise -->
            <div id="appointment-modal-hints" class="hidden mb-4 space-y-2"></div>
            <form id="appointment-form" class="space-y-4">
                <input type="hidden" id="appointment-id">
            <div id="appointment-grid-1" class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                    <div class="sm:col-span-2 md:col-span-1"><label for="appointment-user" class="block text-sm font-medium text-gray-700 mb-1">Mitarbeiter</label><select id="appointment-user" required class="modern-select"></select></div>
                    <div class="sm:col-span-2 md:col-span-1"><label for="appointment-invitee" class="block text-sm font-medium text-gray-700 mb-1">Eingeladener</label><select id="appointment-invitee" class="modern-select"></select></div>
                    <div class="sm:col-span-2 md:col-span-1"><label for="appointment-date" class="block text-sm font-medium text-gray-700 mb-1">Datum & Uhrzeit</label><div class="input-wrapper"><input type="datetime-local" id="appointment-date" required class="modern-input w-full"></div></div>
                    <div class="sm:col-span-2 md:col-span-1"><label for="appointment-duration" class="block text-sm font-medium text-gray-700 mb-1">Dauer (Minuten)</label><input type="number" id="appointment-duration" class="modern-input"></div>
                </div>
                <div id="appointment-location-wrapper" class="hidden"><label for="appointment-location" class="block text-sm font-medium text-gray-700 mb-1">Ort</label><input type="text" id="appointment-location" class="modern-input"></div>
                <!-- KORREKTUR: Fehlender Wrapper für das Wiederholungs-Dropdown hinzugefügt.
                     Das Fehlen dieses Elements hat dazu geführt, dass beim Ändern der Kategorie
                     der Text "null" im Formular erschien, da JavaScript versuchte, ein
                     nicht existentes Element zu verschieben. -->
                <div id="appointment-recurrence-wrapper">
                    <div id="appointment-recurrence-container" class="hidden sm:col-span-1">
                        <label for="appointment-recurrence" class="block text-sm font-medium text-gray-700 mb-1">Wiederholung</label>
                        <select id="appointment-recurrence" class="modern-select"><option value="">Keine</option><option value="täglich">Täglich</option><option value="wöchentlich">Wöchentlich</option><option value="zweiwöchentlich">Zweiwöchentlich</option><option value="monatlich">Monatlich (an diesem Tag)</option></select>
                    </div>
                </div>
            <div id="appointment-grid-2" class="grid grid-cols-2 gap-4">
                    <div><label for="appointment-category" class="block text-sm font-medium text-gray-700 mb-1">Kategorie</label><select id="appointment-category" required class="modern-select"></select></div>
                    <div><label for="appointment-status" class="block text-sm font-medium text-gray-700 mb-1">Status</label><select id="appointment-status" required class="modern-select"></select></div>
                    <div id="appointment-infoabend-container" class="hidden col-span-2"><label for="appointment-infoabend-date" class="block text-sm font-medium text-gray-700 mb-1">Nächster Infoabend</label><div class="input-wrapper"><input type="date" id="appointment-infoabend-date" class="modern-input w-full"></div></div>
                <div id="appointment-partner-container" class="col-span-2"><label for="appointment-partner" class="block text-sm font-medium text-gray-700">Kunde, Bewerber,...</label><input type="text" id="appointment-partner" class="modern-input"></div>
                <div id="appointment-referrals-container-single" class="hidden col-span-2"><label for="appointment-referrals-single" class="block text-sm font-medium text-gray-700">Empfehlungen</label><input type="number" id="appointment-referrals-single" class="modern-input"></div>
                <div id="appointment-prognose-container" class="hidden"><label for="appointment-prognose" class="block text-sm font-medium text-gray-700">Umsatzprognose (EH)</label><input type="number" step="0.01" id="appointment-prognose" class="modern-input"></div>
                <div id="appointment-referrals-container-paired"><label for="appointment-referrals-paired" class="block text-sm font-medium text-gray-700">Empfehlungen</label><input type="number" id="appointment-referrals-paired" class="modern-input"></div>
                </div>
                <div><label for="appointment-note" class="block text-sm font-medium text-gray-700">Hinweis</label><textarea id="appointment-note" rows="3" class="modern-input"></textarea></div>
                <!-- NEU: iCal Download Checkbox -->
                <div class="flex items-center space-x-3 pt-2">
                    <label for="appointment-download-ical" class="toggle-switch">
                        <input type="checkbox" id="appointment-download-ical" class="sr-only peer" checked>
                        <div class="toggle-slider"></div>
                    </label>
                    <label for="appointment-download-ical" class="text-sm font-medium text-gray-700">Termin nach Speichern herunterladen</label>
                </div>
                <div class="pt-6 mt-6 border-t border-gray-200 flex flex-col sm:flex-row justify-between items-stretch sm:items-center gap-3">
                    <div class="order-2 sm:order-1">
                        <button type="button" id="cancel-appointment-storno-btn" class="hidden bg-skt-red-accent text-white font-semibold py-2 px-5 rounded-lg hover:bg-red-700 transition-colors flex items-center justify-center gap-2 w-full sm:w-auto">
                            <i class="fas fa-calendar-times"></i>Absage/Storno
                        </button>
                    </div>
                    <div class="flex flex-col sm:flex-row space-y-3 sm:space-y-0 sm:space-x-3 order-1 sm:order-2 w-full sm:w-auto">
                        <button type="button" id="cancel-appointment-btn" class="bg-gray-200 text-gray-800 font-semibold py-2 px-5 rounded-lg hover:bg-gray-300 transition-colors w-full sm:w-auto">Abbrechen</button>
                        <button type="submit" id="save-appointment-btn" class="bg-skt-blue text-white font-semibold py-2 px-5 rounded-lg hover:bg-skt-blue-light transition-colors flex items-center justify-center w-full sm:w-auto" style="min-width: 110px; min-height: 42px;">
                            <span id="save-btn-text">Speichern</span><div class="loader-small hidden"></div>
                        </button>
                    </div>
                </div>
            </form>
        </div>
    </div>
    <div id="ios-instructions-modal" class="modal-overlay">
        <div class="modal-box bg-white rounded-lg shadow-xl p-6 m-4 max-w-sm text-center">
            <h3 class="text-xl font-bold text-skt-blue mb-2">Benachrichtigungen aktivieren</h3>
            <p class="text-gray-600 mb-4">Um Benachrichtigungen auf einem iPhone zu erhalten, füge diese App bitte zuerst zu deinem Home-Bildschirm hinzu:</p>
            <ol class="text-left text-gray-600 space-y-2 mb-4">
                <li>1. Tippe auf das <i class="fas fa-share-square"></i> **Teilen-Symbol** in der Browser-Leiste.</li>
                <li>2. Scrolle nach unten und wähle **"Zum Home-Bildschirm"**.</li>
                <li>3. Starte die App vom neuen Icon auf deinem Home-Bildschirm.</li>
            </ol>
            <button id="close-ios-modal-btn" class="w-full bg-skt-blue text-white font-semibold py-2 rounded-lg hover:bg-skt-blue-light transition-colors">Verstanden</button>
        </div>
    </div>
    
    <div id="hinweis-modal" class="modal-overlay">
        <div class="modal-box bg-white rounded-lg shadow-xl p-8 m-4 max-w-md relative">
            <button id="close-hinweis-modal-btn" class="absolute top-2 right-3 text-2xl text-gray-500 hover:text-skt-blue">&times;</button>
            <h3 id="hinweis-modal-title" class="text-xl font-bold text-skt-blue mb-4">Hinweis</h3>
            <div id="hinweis-modal-content" class="text-gray-700"></div>
        </div>
    </div>

    <!-- NEU: Modal für die Kunden-Timeline -->
    <div id="customer-timeline-modal" class="modal-overlay">
        <div class="modal-box bg-white rounded-lg shadow-xl p-8 m-4 max-w-2xl w-full relative max-h-[90vh] flex flex-col">
             <button id="close-customer-timeline-modal-btn" class="absolute top-2 right-3 text-2xl text-gray-500 hover:text-skt-blue">&times;</button>
             <h3 id="customer-timeline-modal-title" class="text-2xl font-bold text-skt-blue mb-6">Termin-Historie</h3>
             <div id="customer-timeline-modal-content" class="flex-grow overflow-y-auto pr-4 -mr-4">
                <!-- Timeline wird hier per JS eingefügt -->
                <div class="loader mx-auto"></div>
             </div>
        </div>
    </div>


    <!-- NEU: Modal zum Bearbeiten von Benutzerdaten -->
    <div id="edit-user-modal" class="modal-overlay">
        <div class="modal-box bg-white rounded-lg shadow-xl p-8 m-4 max-w-4xl w-full relative max-h-[90vh] overflow-y-auto">
             <button id="cancel-edit-user-btn" class="absolute top-2 right-3 text-2xl text-gray-500 hover:text-skt-blue">&times;</button>
             <h3 class="text-2xl font-bold text-skt-blue mb-6">Personendaten bearbeiten</h3>
             <form id="edit-user-form" class="space-y-6">
                 <!-- Grunddaten Section -->
                 <div class="border-b border-gray-200 pb-6">
                     <h4 class="text-lg font-semibold text-skt-blue mb-4">Grunddaten</h4>
                     <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                         <div>
                             <label for="edit-name" class="block text-sm font-medium text-gray-700">Name</label>
                             <input type="text" id="edit-name" class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-skt-blue-main focus:border-skt-blue-main">
                         </div>
                         <div>
                             <label for="edit-pwd" class="block text-sm font-medium text-gray-700">Passwort</label>
                             <input type="text" id="edit-pwd" class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-skt-blue-main focus:border-skt-blue-main">
                         </div>
                         <div>
                             <label for="edit-eh-quote" class="block text-sm font-medium text-gray-700">EH pro AT Quote</label>
                             <input type="number" id="edit-eh-quote" class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-skt-blue-main focus:border-skt-blue-main">
                         </div>
                         <div>
                             <label for="edit-birthday" class="block text-sm font-medium text-gray-700">Geburtstag</label>
                             <div class="input-wrapper">
                                <input type="date" id="edit-birthday" class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-skt-blue-main focus:border-skt-blue-main">
                             </div>
                         </div>
                         <div>
                             <label for="edit-start-date" class="block text-sm font-medium text-gray-700">Startdatum</label>
                             <div class="input-wrapper">
                                <input type="date" id="edit-start-date" class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-skt-blue-main focus:border-skt-blue-main">
                             </div>
                         </div>
                         <div>
                             <label for="edit-promotion-date" class="block text-sm font-medium text-gray-700">Nächstes Rennen Startdatum</label>
                             <div class="input-wrapper">
                                <input type="date" id="edit-promotion-date" class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-skt-blue-main focus:border-skt-blue-main">
                             </div>
                             <p class="mt-1 text-xs text-gray-500">Startdatum deines nächsten Karriereschritts</p>
                         </div>
                     </div>
                 </div>

                 <!-- Profilbild Section -->
                 <div class="border-b border-gray-200 pb-6">
                     <h4 class="text-lg font-semibold text-skt-blue mb-4">Profilbild</h4>
                     <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                         <div>
                             <label for="edit-bild" class="block text-sm font-medium text-gray-700 mb-2">Bild hochladen</label>
                             <input type="file" id="edit-bild" accept="image/*" class="block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-skt-blue file:text-white hover:file:bg-skt-blue-light">
                             <p class="mt-1 text-xs text-gray-500">PNG, JPG oder GIF bis 5MB</p>
                         </div>
                         <div>
                             <label class="block text-sm font-medium text-gray-700 mb-2">Vorschau</label>
                             <div id="edit-image-preview" class="w-32 h-32 border-2 border-dashed border-gray-300 rounded-lg flex items-center justify-center bg-gray-50">
                                 <span class="text-gray-400 text-sm">Kein Bild</span>
                             </div>
                         </div>
                     </div>
                 </div>

                 <!-- Qualifikationen Section -->
                 <div class="border-b border-gray-200 pb-6">
                     <h4 class="text-lg font-semibold text-skt-blue mb-4">Qualifikationen</h4>
                     <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                         <div class="flex items-center space-x-3">
                             <input type="checkbox" id="edit-va" class="h-4 w-4 rounded border-gray-300 text-skt-blue focus:ring-skt-blue-light">
                             <label for="edit-va" class="text-sm font-medium text-gray-700">VA (Versicherungsagent)</label>
                         </div>
                         <div class="flex items-center space-x-3">
                             <input type="checkbox" id="edit-vb" class="h-4 w-4 rounded border-gray-300 text-skt-blue focus:ring-skt-blue-light">
                             <label for="edit-vb" class="text-sm font-medium text-gray-700">VB (Versicherungsberater)</label>
                         </div>
                         <div class="flex items-center space-x-3">
                             <input type="checkbox" id="edit-immobilienexperte" class="h-4 w-4 rounded border-gray-300 text-skt-blue focus:ring-skt-blue-light">
                             <label for="edit-immobilienexperte" class="text-sm font-medium text-gray-700">Immobilienexperte</label>
                         </div>
                     </div>
                 </div>

                 <!-- Text über mich Section -->
                 <div class="border-b border-gray-200 pb-6">
                     <h4 class="text-lg font-semibold text-skt-blue mb-4">Über mich</h4>
                     <div>
                         <label for="edit-text-zu-mir" class="block text-sm font-medium text-gray-700 mb-2">Text über mich</label>
                         <textarea id="edit-text-zu-mir" rows="4" class="block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-skt-blue-main focus:border-skt-blue-main" placeholder="Erzähle etwas über dich, deine Erfahrungen und was dich antreibt..."></textarea>
                         <p class="mt-1 text-xs text-gray-500">Dieser Text wird in deiner Berater-Vorstellung angezeigt</p>
                     </div>
                 </div>
                 <!-- Check-in Einstellungen Section (nur für Führungskräfte) -->
                 <div id="edit-checkin-section" class="hidden border-b border-gray-200 pb-6">
                     <h4 class="text-lg font-semibold text-skt-blue mb-4">Check-in Einstellungen</h4>
                     <div id="edit-checkin-container" class="flex items-center space-x-3 mb-4">
                         <label for="edit-checkin-enabled" class="toggle-switch">
                             <input type="checkbox" id="edit-checkin-enabled" class="sr-only peer">
                             <div class="toggle-slider"></div>
                         </label>
                         <label for="edit-checkin-enabled" class="text-sm font-medium text-gray-700">Täglichen Check-in für diesen Nutzer aktivieren</label>
                     </div>
                     <div id="edit-checkin-days-container" class="hidden space-y-2">
                         <label class="block text-sm font-medium text-gray-700">An welchen Tagen soll der Check-in erscheinen?</label>
                         <div class="flex flex-wrap gap-x-4 gap-y-2">
                             <label class="flex items-center space-x-2"><input type="checkbox" data-day="Mo" class="checkin-day-checkbox h-4 w-4 rounded border-gray-300 text-skt-blue focus:ring-skt-blue-light"> <span>Mo</span></label>
                             <label class="flex items-center space-x-2"><input type="checkbox" data-day="Di" class="checkin-day-checkbox h-4 w-4 rounded border-gray-300 text-skt-blue focus:ring-skt-blue-light"> <span>Di</span></label>
                             <label class="flex items-center space-x-2"><input type="checkbox" data-day="Mi" class="checkin-day-checkbox h-4 w-4 rounded border-gray-300 text-skt-blue focus:ring-skt-blue-light"> <span>Mi</span></label>
                             <label class="flex items-center space-x-2"><input type="checkbox" data-day="Do" class="checkin-day-checkbox h-4 w-4 rounded border-gray-300 text-skt-blue focus:ring-skt-blue-light"> <span>Do</span></label>
                             <label class="flex items-center space-x-2"><input type="checkbox" data-day="Fr" class="checkin-day-checkbox h-4 w-4 rounded border-gray-300 text-skt-blue focus:ring-skt-blue-light"> <span>Fr</span></label>
                             <label class="flex items-center space-x-2"><input type="checkbox" data-day="Sa" class="checkin-day-checkbox h-4 w-4 rounded border-gray-300 text-skt-blue focus:ring-skt-blue-light"> <span>Sa</span></label>
                             <label class="flex items-center space-x-2"><input type="checkbox" data-day="So" class="checkin-day-checkbox h-4 w-4 rounded border-gray-300 text-skt-blue focus:ring-skt-blue-light"> <span>So</span></label>
                         </div>
                     </div>
                 </div>

                 <!-- Ausscheiden Section -->
                 <div class="pb-6">
                     <h4 class="text-lg font-semibold text-skt-blue mb-4">Status</h4>
                     <div class="flex items-center space-x-3 mb-4">
                         <label for="edit-ausgeschieden" class="toggle-switch">
                             <input type="checkbox" id="edit-ausgeschieden" class="sr-only peer">
                             <div class="toggle-slider"></div>
                         </label>
                         <label for="edit-ausgeschieden" class="text-sm font-medium text-gray-700">Mitarbeiter ausgeschieden</label>
                     </div>
                     <div id="ausscheide-fields-container" class="hidden space-y-4 border-t border-gray-200 pt-4">
                         <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                             <div>
                                 <label for="edit-ausscheidetag" class="block text-sm font-medium text-gray-700">Ausscheidedatum</label>
                                 <div class="input-wrapper">
                                    <input type="date" id="edit-ausscheidetag" class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-skt-blue-main focus:border-skt-blue-main">
                                 </div>
                             </div>
                             <div>
                                 <label for="edit-ausscheidegrund" class="block text-sm font-medium text-gray-700">Ausscheidegrund</label>
                                 <textarea id="edit-ausscheidegrund" rows="2" class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-skt-blue-main focus:border-skt-blue-main"></textarea>
                             </div>
                         </div>
                     </div>
                 </div>

                 <div class="pt-4 flex justify-end space-x-3">
                     <button type="button" id="cancel-edit-user-btn-2" class="bg-gray-200 text-gray-800 font-semibold py-2 px-5 rounded-lg hover:bg-gray-300 transition-colors">Abbrechen</button>
                     <button type="submit" id="save-user-btn" class="bg-skt-blue text-white font-semibold py-2 px-5 rounded-lg hover:bg-skt-blue-light transition-colors">Speichern</button>
                 </div>
             </form>
        </div>
    }
                 </div>
             </form>
        </div>
    </div>
    <!-- NEU: Modal zum Hinzufügen von Benutzern -->
    <div id="add-user-modal" class="modal-overlay">
        <div class="modal-box bg-white rounded-lg shadow-xl p-8 m-4 max-w-lg w-full relative">
             <button id="cancel-add-user-btn" class="absolute top-2 right-3 text-2xl text-gray-500 hover:text-skt-blue">&times;</button>
             <h3 class="text-2xl font-bold text-skt-blue mb-6">Neuen Nutzer anlegen</h3>
             <form id="add-user-form" class="space-y-4">
                 <div>
                     <label for="add-name" class="block text-sm font-medium text-gray-700">Name</label>
                     <input type="text" id="add-name" required class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-skt-blue-main focus:border-skt-blue-main">
                 </div>
                 <div>
                     <label for="add-pwd" class="block text-sm font-medium text-gray-700">Passwort</label>
                     <input type="text" id="add-pwd" required class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-skt-blue-main focus:border-skt-blue-main">
                 </div>
                 <div>
                     <label for="add-birthday" class="block text-sm font-medium text-gray-700">Geburtstag</label>
                     <!-- KORREKTUR: Wrapper hinzugefügt, um das Überlaufen des Datumsfelds auf iOS zu verhindern -->
                     <div class="input-wrapper">
                        <input type="date" id="add-birthday" class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-skt-blue-main focus:border-skt-blue-main">
                     </div>
                 </div>
                 <div>
                     <label for="add-werber" class="block text-sm font-medium text-gray-700">Werber</label>
                     <select id="add-werber" required class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-skt-blue-main focus:border-skt-blue-main"></select>
                 </div>
                 <div>
                     <label for="add-buero" class="block text-sm font-medium text-gray-700">Büro</label>
                     <select id="add-buero" required class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-skt-blue-main focus:border-skt-blue-main"></select>
                 </div>
                 <div>
                     <label for="add-infoabend" class="block text-sm font-medium text-gray-700">Infoabend (Startdatum)</label>
                     <select id="add-infoabend" required class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-skt-blue-main focus:border-skt-blue-main"></select>
                 </div>
                 <div class="pt-4 flex justify-end space-x-3">
                     <button type="button" id="cancel-add-user-btn-2" class="bg-gray-200 text-gray-800 font-semibold py-2 px-5 rounded-lg hover:bg-gray-300 transition-colors">Abbrechen</button>
                     <button type="submit" id="save-new-user-btn" class="bg-skt-blue text-white font-semibold py-2 px-5 rounded-lg hover:bg-skt-blue-light transition-colors">Nutzer anlegen</button>
                 </div>
             </form>
        </div>
    </div>

    <!-- NEU: Team-Planung Modal -->
    <div id="team-planung-modal" class="modal-overlay">
        <div class="modal-box bg-white rounded-lg shadow-xl p-6 m-4 max-w-7xl w-full relative max-h-[90vh] flex flex-col">
             <button id="close-team-planung-modal" class="absolute top-2 right-3 text-2xl text-gray-500 hover:text-skt-blue">&times;</button>
             <h3 class="text-2xl font-bold text-skt-blue mb-6">Team-Planung & Qualifikationen</h3>
             
             <!-- Filter und Suche -->
             <div class="mb-6">
                 <div class="flex flex-wrap gap-4 items-center mb-3">
                     <input type="text" id="team-planung-search" placeholder="Mitarbeiter suchen..." class="px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-skt-blue">
                     <button id="toggle-qualification-filters-btn" class="px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg transition-colors flex items-center gap-2">
                         <i class="fas fa-filter"></i>
                         <span>Filter</span>
                         <i id="filter-toggle-icon" class="fas fa-chevron-down text-xs"></i>
                     </button>
                 </div>
                 <!-- Qualifikations-Filter (standardmäßig ausgeblendet) -->
                 <div id="qualification-filters-container" class="hidden gap-2 mt-3 p-4 bg-gray-50 rounded-lg border border-gray-200">
                     <label class="inline-flex items-center">
                         <input type="checkbox" id="filter-va" class="mr-2">
                         <span class="text-sm">Nur VA</span>
                     </label>
                     <label class="inline-flex items-center">
                         <input type="checkbox" id="filter-vb" class="mr-2">
                         <span class="text-sm">Nur VB</span>
                     </label>
                     <label class="inline-flex items-center">
                         <input type="checkbox" id="filter-immo" class="mr-2">
                         <span class="text-sm">Nur Immo</span>
                     </label>
                     <label class="inline-flex items-center">
                         <input type="checkbox" id="filter-recruiter" class="mr-2">
                         <span class="text-sm">Nur Recruiter</span>
                     </label>
                 </div>
             </div>

             <!-- Tabelle -->
             <div class="flex-grow overflow-y-auto">
                 <table class="w-full text-sm">
                     <thead class="bg-skt-grey-light sticky top-0">
                         <tr>
                             <th class="px-3 py-3 text-left font-semibold text-skt-blue">Name</th>
                             <th class="px-3 py-3 text-center font-semibold text-skt-blue">VA</th>
                             <th class="px-3 py-3 text-center font-semibold text-skt-blue">VB</th>
                             <th class="px-3 py-3 text-center font-semibold text-skt-blue">Immo</th>
                             <th class="px-3 py-3 text-center font-semibold text-skt-blue">Recruiter</th>
                             <th class="px-3 py-3 text-center font-semibold text-skt-blue">EH-Ziel</th>
                             <th class="px-3 py-3 text-center font-semibold text-skt-blue">ET-Ziel</th>
                         </tr>
                     </thead>
                     <tbody id="team-planung-table-body" class="bg-white divide-y divide-gray-200">
                         <!-- Wird dynamisch gefüllt -->
                     </tbody>
                 </table>
             </div>

             <div class="mt-6 flex justify-end">
                 <button id="close-team-planung-modal-btn" class="bg-gray-200 text-gray-800 font-semibold py-2 px-5 rounded-lg hover:bg-gray-300 transition-colors">Schließen</button>
             </div>
        </div>
    </div>

    <!-- NEU: Modal für die Monatsplanung -->
    <div id="planning-modal" class="modal-overlay">
        <div class="modal-box bg-white rounded-lg shadow-xl p-8 m-4 max-w-lg w-full relative">
             <button id="cancel-planning-btn" class="absolute top-2 right-3 text-2xl text-gray-500 hover:text-skt-blue">&times;</button>
             <h3 id="planning-modal-title" class="text-2xl font-bold text-skt-blue mb-6">Monatsplanung hinzufügen/bearbeiten</h3>
             <form id="planning-form" class="space-y-4">
                 <div>
                     <label for="planning-user-select" class="block text-sm font-medium text-gray-700">Mitarbeiter</label>
                     <select id="planning-user-select" required class="modern-select"></select>
                 </div>
                 <div class="grid grid-cols-2 gap-4">
                     <div>
                         <label for="planning-month-select" class="block text-sm font-medium text-gray-700">Monat</label>
                         <select id="planning-month-select" required class="modern-select"></select>
                     </div>
                     <div>
                         <label for="planning-year-input" class="block text-sm font-medium text-gray-700">Jahr</label>
                         <input type="number" id="planning-year-input" required class="modern-input">
                     </div>
                 </div>
                 <div>
                     <label for="planning-eh-goal" class="block text-sm font-medium text-gray-700">EH Ziel</label>
                     <input type="number" id="planning-eh-goal" required class="modern-input">
                 </div>
                 <!-- NEU: Überschrift für die Info-Planung -->
                 <div class="border-t border-gray-200 pt-6">
                    <h3 class="text-2xl font-bold text-skt-blue mb-6">Infoplanung hinzufügen/bearbeiten</h3>
                 </div>
                 <div>
                     <label for="planning-et-goal" class="block text-sm font-medium text-gray-700">ET Ziel</label>
                     <input type="number" id="planning-et-goal" required class="modern-input">
                 </div>
                 <div>
                     <label for="planning-infoabend-date" class="block text-sm font-medium text-gray-700">Zugehöriger Infoabend</label>
                     <div class="input-wrapper">
                        <input type="date" id="planning-infoabend-date" disabled class="modern-input bg-gray-100 cursor-not-allowed">
                     </div>
                     <p class="mt-1 text-xs text-gray-500">Dieses Datum wird automatisch auf den nächsten Infoabend gesetzt.</p>
                 </div>
                 <div class="pt-4 flex justify-end space-x-3">
                     <button type="button" id="cancel-planning-btn-2" class="bg-gray-200 text-gray-800 font-semibold py-2 px-5 rounded-lg hover:bg-gray-300 transition-colors">Abbrechen</button>
                     <button type="submit" id="save-planning-btn" class="bg-skt-blue text-white font-semibold py-2 px-5 rounded-lg hover:bg-skt-blue-light transition-colors">Planung speichern</button>
                 </div>
             </form>
        </div>
    </div>
    <!-- NEU: Modal für die Zeitreise -->
    <div id="time-travel-modal" class="modal-overlay">
        <div class="modal-box bg-white rounded-lg shadow-xl p-8 m-4 max-w-lg w-full relative">
             <button id="cancel-time-travel-btn" class="absolute top-2 right-3 text-2xl text-gray-500 hover:text-skt-blue">&times;</button>
             <h3 class="text-2xl font-bold text-skt-blue mb-6">Zeitreise</h3>
             <p class="text-gray-600 mb-6">Wähle ein Datum in der Vergangenheit, um das Dashboard so anzuzeigen, als wärst du in diesem Monat.</p>
             <form id="time-travel-form" class="space-y-4">
                 <div class="grid grid-cols-2 gap-4">
                     <div>
                         <label for="time-travel-month-select" class="block text-sm font-medium text-gray-700">Monat</label>
                         <select id="time-travel-month-select" required class="modern-select"></select>
                     </div>
                     <div>
                         <label for="time-travel-year-select" class="block text-sm font-medium text-gray-700">Jahr</label>
                         <select id="time-travel-year-select" required class="modern-select"></select>
                     </div>
                 </div>
                 <div class="pt-4 flex justify-end space-x-3">
                     <button type="button" id="cancel-time-travel-btn-2" class="bg-gray-200 text-gray-800 font-semibold py-2 px-5 rounded-lg hover:bg-gray-300 transition-colors">Abbrechen</button>
                     <button type="submit" id="start-time-travel-btn" class="bg-skt-blue text-white font-semibold py-2 px-5 rounded-lg hover:bg-skt-blue-light transition-colors">Reise starten</button>
                 </div>
             </form>
        </div>
    </div>
    <!-- NEU: Benutzerdefiniertes Bestätigungs-Modal -->
    <div id="confirm-modal" class="modal-overlay">
        <div class="modal-box bg-white rounded-lg shadow-xl p-8 m-4 max-w-md w-full text-center">
            <h3 id="confirm-modal-title" class="text-xl font-bold text-skt-blue mb-4">Bestätigung</h3>
            <p id="confirm-modal-text" class="text-gray-600 mb-6">Möchten Sie diese Aktion wirklich durchführen?</p>
            <div class="flex justify-center space-x-4">
                <button id="confirm-modal-cancel-btn" class="bg-gray-200 text-gray-800 font-semibold py-2 px-6 rounded-lg hover:bg-gray-300 transition-colors">Abbrechen</button>
                <button id="confirm-modal-ok-btn" class="bg-red-600 text-white font-semibold py-2 px-6 rounded-lg hover:bg-red-700 transition-colors">Bestätigen</button>
            </div>
        </div>
    </div>
    <!-- NEU: Modal für die BT-Folgeplanung nach einem gehaltenen AT -->
    <div id="bt-follow-up-modal" class="modal-overlay">
        <div class="modal-box bg-white rounded-lg shadow-xl p-8 m-4 max-w-lg w-full relative max-h-[90vh] overflow-y-auto">
            <h3 class="text-2xl font-bold text-skt-blue mb-6">Nächster Schritt: Beratungstermin</h3>
            <form id="bt-follow-up-form" class="space-y-4">
                <input type="hidden" id="bt-follow-up-original-at-id">
                <input type="hidden" id="bt-follow-up-partner-name">
                <input type="hidden" id="bt-follow-up-owner-id">
                
                <p class="text-gray-600">Der Analysetermin wurde als "gehalten" markiert. Was ist der nächste Schritt?</p>

                <!-- NEU: Radio-Buttons zur Auswahl der Aktion -->
                <div class="flex space-x-4">
                    <label class="flex-1 p-4 border rounded-lg cursor-pointer transition-all duration-200 hover:shadow-md hover:border-skt-blue-main has-[:checked]:border-skt-blue has-[:checked]:bg-blue-50 has-[:checked]:ring-2 has-[:checked]:ring-skt-blue-main"><input type="radio" name="bt_follow_up_action" value="plan_bt" class="sr-only"><span class="font-semibold text-skt-blue">Neuen BT anlegen</span></label>
                    <label class="flex-1 p-4 border rounded-lg cursor-pointer transition-all duration-200 hover:shadow-md hover:border-skt-blue-main has-[:checked]:border-skt-blue has-[:checked]:bg-blue-50 has-[:checked]:ring-2 has-[:checked]:ring-skt-blue-main"><input type="radio" name="bt_follow_up_action" value="no_bt" class="sr-only"><span class="font-semibold text-skt-blue">Kein BT</span></label>
                </div>

                <!-- Option 1: BT planen (wird per JS ein-/ausgeblendet) -->
                <div id="bt-follow-up-plan-bt-container" class="hidden p-4 border rounded-lg space-y-4">
                    <h4 class="font-semibold text-skt-blue">Details für den neuen Beratungstermin (BT)</h4>
                    <div>
                        <label for="bt-follow-up-date" class="block text-sm font-medium text-gray-700 mb-1">Datum & Uhrzeit</label>
                        <div class="input-wrapper"><input type="datetime-local" id="bt-follow-up-date" class="modern-input w-full"></div>
                    </div>
                    <div>
                        <label for="bt-follow-up-produkte" class="block text-sm font-medium text-gray-700 mb-1">Geplante Produkte</label>
                        <div id="bt-follow-up-produkte-container" class="grid grid-cols-2 gap-x-4 gap-y-2 p-3 bg-gray-50 rounded-lg border max-h-40 overflow-y-auto">
                            <!-- Produkt-Checkboxen werden hier per JS eingefügt -->
                        </div>
                    </div>
                    <div><label for="bt-follow-up-prognose" class="block text-sm font-medium text-gray-700 mb-1">Umsatzprognose (EH)</label><input type="number" step="0.01" id="bt-follow-up-prognose" class="modern-input"></div>
                    <div><label for="bt-follow-up-notiz" class="block text-sm font-medium text-gray-700 mb-1">Notiz</label><textarea id="bt-follow-up-notiz" rows="3" class="modern-input"></textarea></div>
                </div>

                <!-- Option 2: Kein BT (wird per JS ein-/ausgeblendet) -->
                <div id="bt-follow-up-no-bt-container" class="hidden p-4 border rounded-lg">
                    <h4 class="font-semibold text-skt-blue mb-2">Grund für keinen Beratungstermin</h4>
                    <div><label for="bt-follow-up-no-bt-reason" class="block text-sm font-medium text-gray-700 mb-1">Grund (z.B. kein Interesse, unpassend)</label><textarea id="bt-follow-up-no-bt-reason" rows="2" class="modern-input" placeholder="Bitte gib einen Grund an..."></textarea></div>
                </div>
                <div class="pt-4 flex justify-end space-x-3"><button type="button" id="cancel-bt-follow-up-btn" class="bg-gray-200 text-gray-800 font-semibold py-2 px-5 rounded-lg hover:bg-gray-300 transition-colors">Später entscheiden</button><button type="submit" id="save-bt-follow-up-btn" class="bg-skt-blue text-white font-semibold py-2 px-5 rounded-lg hover:bg-skt-blue-light transition-colors">Aktion speichern</button></div>
            </form>
        </div>
    </div>
    <!-- NEU: Modal für Termin-Absage -->
    <div id="storno-modal" class="modal-overlay">
        <div class="modal-box bg-white rounded-lg shadow-xl p-8 m-4 max-w-lg w-full relative">
            <button id="close-storno-modal-btn" class="absolute top-2 right-3 text-2xl text-gray-500 hover:text-skt-blue">&times;</button>
            <h3 class="text-2xl font-bold text-skt-blue mb-6">Termin absagen</h3>
            <form id="storno-form" class="space-y-4">
                <input type="hidden" id="storno-appointment-id">
                <div>
                    <label for="storno-reason" class="block text-sm font-medium text-gray-700">Absagegrund</label>
                    <textarea id="storno-reason" rows="3" required class="modern-input mt-1" placeholder="z.B. Kunde hat abgesagt, kein Interesse mehr..."></textarea>
                </div>
                <div class="flex items-center space-x-3 pt-2">
                    <label for="storno-move-to-potential" class="toggle-switch">
                        <input type="checkbox" id="storno-move-to-potential" class="sr-only peer" checked>
                        <div class="toggle-slider"></div>
                    </label>
                    <label for="storno-move-to-potential" class="text-sm font-medium text-gray-700">Kontakt zur Potenzialliste hinzufügen</label>
                </div>
                <p class="text-xs text-gray-500">Wenn diese Option aktiviert ist, wird der Kontakt in die Potenzialliste verschoben (Datum wird entfernt). Andernfalls bleibt der Termin als "Storno" im Kalender bestehen.</p>
                <div class="pt-4 flex justify-end space-x-3"><button type="button" id="cancel-storno-btn" class="bg-gray-200 text-gray-800 font-semibold py-2 px-5 rounded-lg hover:bg-gray-300 transition-colors">Abbrechen</button><button type="submit" id="save-storno-btn" class="bg-skt-red-accent text-white font-semibold py-2 px-5 rounded-lg hover:bg-red-700 transition-colors">Absage speichern</button></div>
            </form>
        </div>
    </div>
    <!-- NEU: Modal für den täglichen Check-in -->
    <div id="checkin-modal" class="modal-overlay">
        <div class="modal-box bg-white rounded-lg shadow-xl p-8 m-4 max-w-5xl w-full relative max-h-[90vh] flex flex-col">
            <button id="close-checkin-modal-btn" class="absolute top-2 right-3 text-3xl text-gray-400 hover:text-skt-blue transition-colors z-10">&times;</button>
            <div class="flex justify-between items-center mb-4">
                <h3 id="checkin-modal-title" class="text-2xl font-bold text-skt-blue">Täglicher Check-in</h3>
                <span id="checkin-timer-display" class="text-lg font-mono text-skt-blue-light bg-skt-grey-light px-3 py-1 rounded-md">00:00</span>
            </div>
            <form id="checkin-form" class="flex-grow flex flex-col min-h-0">
                <!-- Step 1: Main Check-in -->
                <div id="checkin-step-1" class="checkin-step flex-grow flex flex-col min-h-0">
                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                        <div><label for="checkin-motivation" class="block text-sm font-medium text-gray-700 mb-1">Was motiviert dich heute Gas zu geben?</label><textarea id="checkin-motivation" rows="5" class="modern-input" required></textarea></div>
                        <div>
                            <label for="checkin-stimmung" class="block text-sm font-medium text-gray-700 mb-1">Wie ist deine aktuelle Stimmung?</label>
                            <div class="relative pt-8">
                                <input type="range" id="checkin-stimmung" min="1" max="10" value="5" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer">
                                <div id="checkin-stimmung-value" class="absolute text-lg font-bold text-skt-blue transition-all duration-200 ease-out" style="top: 0; left: 50%; transform: translateX(-50%);">5</div>
                            </div>
                        </div>
                        <div class="flex flex-col">
                            <label for="checkin-todos-container" class="block text-sm font-medium text-gray-700 mb-1">Was sind deine wichtigsten 3 To-Dos heute?</label>
                            <div id="checkin-todos-container" class="modern-input p-3 overflow-y-auto" style="min-height: 145px; background-color: #f9fafb;"></div>
                        </div>
                    </div>
                </div>

                <!-- Step 2: Team Check -->
                <div id="checkin-step-2" class="checkin-step hidden flex-grow flex flex-col min-h-0">
                    <h4 class="text-xl font-semibold text-skt-blue mb-4">Team-Check</h4>
                    <div id="checkin-matrix-container" class="flex-grow overflow-y-auto pr-2" style="min-height: 150px;"></div>
                </div>

                <!-- Step 3: Follow-up questions -->
                <div id="checkin-step-3" class="checkin-step hidden flex-grow flex flex-col min-h-0">
                    <h4 class="text-xl font-semibold text-skt-blue mb-4">Vertiefende Fragen</h4>
                    <div id="checkin-follow-up-container" class="flex-grow overflow-y-auto pr-2 space-y-6">
                        <!-- Content generated by JS -->
                    </div>
                </div>

                <!-- Step 4: KPI Warnings -->
                <div id="checkin-step-4" class="checkin-step hidden flex-grow flex flex-col min-h-0">
                    <h4 class="text-xl font-semibold text-skt-blue mb-4">KPI-Warnungen & Maßnahmen</h4>
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 flex-grow min-h-0">
                        <div id="checkin-kpi-warnings-container" class="overflow-y-auto pr-2 space-y-4 bg-gray-50 p-4 rounded-lg">
                            <!-- KPI Warnings generated by JS -->
                        </div>
                        <div class="flex flex-col">
                            <label for="checkin-kpi-antworten" class="block text-sm font-medium text-gray-700 mb-1">Was unternimmst du bzgl. dieser Warnungen?</label>
                            <textarea id="checkin-kpi-antworten" rows="10" class="modern-input flex-grow"></textarea>
                        </div>
                    </div>
                </div>

                <!-- NEU: Step 2 für Trainees -->
                <div id="checkin-step-trainee-2" class="checkin-step hidden flex-grow flex flex-col min-h-0">
                    <h4 class="text-xl font-semibold text-skt-blue mb-4">Dein großes Ziel</h4>
                    <label for="checkin-eigenziel" class="block text-sm font-medium text-gray-700 mb-1">Was ist dein großes Ziel, auf das du hinarbeitest?</label>
                    <textarea id="checkin-eigenziel" rows="10" class="modern-input flex-grow" placeholder="z.B. Beförderung zum GST, finanzielle Freiheit, ein bestimmtes Einkommensziel..."></textarea>
                </div>

                <!-- NEU: Step 3 für Trainees -->
                <div id="checkin-step-trainee-3" class="checkin-step hidden flex-grow flex flex-col min-h-0">
                    <h4 class="text-xl font-semibold text-skt-blue mb-4">Dein heutiger Beitrag</h4>
                    <label for="checkin-change" class="block text-sm font-medium text-gray-700 mb-1">Was tust du HEUTE, um diesem Ziel einen Schritt näher zu kommen?</label>
                    <textarea id="checkin-change" rows="10" class="modern-input flex-grow" placeholder="z.B. 5 neue Kontakte knüpfen, ein Verkaufsgespräch üben, einen Termin vereinbaren..."></textarea>
                </div>

                <!-- Actions -->
                <div id="checkin-actions" class="pt-4 mt-4 flex justify-between items-center flex-shrink-0">
                    <button type="button" id="checkin-back-btn" class="hidden bg-gray-200 text-gray-800 font-semibold py-2 px-5 rounded-lg hover:bg-gray-300 transition-colors">Zurück</button>
                    <button type="button" id="checkin-next-btn" class="bg-skt-blue text-white font-semibold py-2 px-5 rounded-lg hover:bg-skt-blue-light transition-colors">Weiter</button>
                    <button type="submit" id="save-checkin-btn" class="hidden bg-skt-green-accent text-white font-semibold py-2 px-5 rounded-lg hover:bg-green-700 transition-colors">Check-in abschließen</button>
                </div>
            </form>
        </div>
    </div>
    <!-- NEU: Modal für die Zeichenfunktion -->
    <div id="drawing-modal" class="modal-overlay">
        <div class="modal-box bg-white rounded-lg shadow-xl p-6 m-4 max-w-4xl w-full relative flex flex-col h-[85vh]">
            <h3 class="text-2xl font-bold text-skt-blue mb-4">Zeichnung erstellen</h3>
            <div class="flex-grow border border-gray-300 rounded-md overflow-hidden" style="min-height: 0;">
                <canvas id="drawing-canvas" class="w-full h-full bg-white"></canvas>
            </div>
            <div class="mt-4 flex flex-wrap justify-between items-center gap-4">
                <div class="flex items-center gap-4">
                    <div class="flex items-center gap-2"><label for="drawing-color" class="text-sm">Farbe:</label><input type="color" id="drawing-color" value="#002147"></div>
                    <div class="flex items-center gap-2"><label for="drawing-pen-width" class="text-sm">Dicke:</label><input type="range" id="drawing-pen-width" min="1" max="10" value="2" class="w-24"></div>
                </div>
                <div class="flex gap-3">
                    <button id="drawing-undo-btn" class="bg-gray-200 text-gray-800 font-semibold py-2 px-4 rounded-lg hover:bg-gray-300 transition-colors"><i class="fas fa-undo"></i></button>
                    <button id="drawing-clear-btn" class="bg-gray-200 text-gray-800 font-semibold py-2 px-4 rounded-lg hover:bg-gray-300 transition-colors">Löschen</button>
                    <button id="drawing-save-btn" class="bg-skt-blue text-white font-semibold py-2 px-4 rounded-lg hover:bg-skt-blue-light transition-colors">Zeichnung übernehmen</button>
                </div>
            </div>
        </div>
    </div>

    <!-- NEU: Modal für Hilfe / Support -->
    <div id="help-modal" class="modal-overlay">
        <div class="modal-box bg-white rounded-lg shadow-xl p-8 m-4 max-w-lg w-full relative">
             <button id="cancel-help-btn" class="absolute top-2 right-3 text-2xl text-gray-500 hover:text-skt-blue">&times;</button>
             <h3 class="text-2xl font-bold text-skt-blue mb-6">Hilfe & Support</h3>
             <p class="text-gray-600 mb-4">Egal ob technisches oder persönliches Anliegen, hier ist dein direkter und 100% anonymer Draht zu Jonas Andessner. Deine Nachricht wird vertraulich behandelt.</p>
             <form id="help-form" class="space-y-4">
                 <div>
                     <label for="help-subject" class="block text-sm font-medium text-gray-700">Betreff</label>
                     <input type="text" id="help-subject" required class="modern-input mt-1">
                 </div>
                 <div>
                     <label for="help-message" class="block text-sm font-medium text-gray-700">Deine Nachricht</label>
                     <textarea id="help-message" rows="5" required class="modern-input mt-1"></textarea>
                 </div>
                 <div class="pt-4 flex justify-end space-x-3">
                     <button type="button" id="cancel-help-btn-2" class="bg-gray-200 text-gray-800 font-semibold py-2 px-5 rounded-lg hover:bg-gray-300 transition-colors">Abbrechen</button>
                     <button type="submit" id="send-help-btn" class="bg-skt-blue text-white font-semibold py-2 px-5 rounded-lg hover:bg-skt-blue-light transition-colors flex items-center justify-center" style="min-width: 110px;">
                        <span id="send-help-btn-text">Senden</span>
                        <div class="loader-small hidden"></div>
                     </button>
                 </div>
             </form>
        </div>
    </div>

    <!-- NEU: Modal für ET-Ziel-Motivation -->
    <div id="et-motivation-modal" class="modal-overlay">
        <div class="modal-box bg-white rounded-lg shadow-xl p-8 m-4 max-w-lg w-full text-center">
            <h3 class="text-2xl font-bold text-skt-blue mb-4">Ein kleiner Schub für dein Recruiting!</h3>
            <div id="et-motivation-message" class="text-gray-700 space-y-4 mb-6 prose prose-sm max-w-none text-left">
                <!-- AI-generierte Nachricht wird hier eingefügt -->
                <div class="loader mx-auto"></div>
            </div>
            <div id="et-motivation-prompt" class="p-4 bg-skt-grey-light rounded-lg border border-gray-200 mb-6 text-sm">
                <!-- Aufforderung wird hier eingefügt -->
            </div>
            <button id="close-et-motivation-btn" class="hidden bg-skt-blue text-white font-semibold py-2 px-6 rounded-lg hover:bg-skt-blue-light transition-colors">
                Los geht's!
            </button>
            <p id="et-motivation-disclaimer" class="text-xs text-gray-400 mt-4"></p>
            <div id="et-motivation-timer-bar" class="w-full bg-gray-200 rounded-full h-2.5 mt-4"><div class="bg-skt-blue h-2.5 rounded-full"></div></div>
        </div>
    </div>

    <!-- NEU: Modal für den Freitags-Check-in (WorkingDay) -->
    <div id="working-day-modal" class="modal-overlay">
        <div class="modal-box bg-white rounded-lg shadow-xl p-8 m-4 max-w-2xl w-full relative max-h-[90vh] overflow-y-auto">
            <button id="close-working-day-modal-btn" class="absolute top-2 right-3 text-2xl text-gray-500 hover:text-skt-blue">&times;</button>
            <h3 class="text-2xl font-bold text-skt-blue mb-6">Working Day</h3>
            <form id="working-day-form" class="space-y-6">
                <input type="hidden" id="working-day-id">
                <div>
                    <label for="working-day-potential" class="block text-sm font-medium text-gray-700">Wieviel Potential hast du in deiner Gruppe erarbeiten können?</label>
                    <input type="number" id="working-day-potential" class="modern-input mt-1" placeholder="Anzahl">
                </div>
                <div class="flex items-center space-x-3 pt-2">
                    <label for="working-day-interventionen" class="toggle-switch"><input type="checkbox" id="working-day-interventionen" class="sr-only peer"><div class="toggle-slider"></div></label>
                    <label for="working-day-interventionen" class="text-sm font-medium text-gray-700">Hast du deine Interventionen erledigt?</label>
                </div>
                <div>
                    <label for="working-day-kundenservice" class="block text-sm font-medium text-gray-700">Welche Kunden hast du heute zu einem Servicetermin angerufen?</label>
                    <div id="working-day-kundenservice" class="tag-input-container modern-input mt-1"></div>
                </div>
                <div>
                    <label for="working-day-epa" class="block text-sm font-medium text-gray-700">Wieviele EPA Termine (AT, BT) hast du heute im Team vereinbart?</label>
                    <input type="number" id="working-day-epa" class="modern-input mt-1" placeholder="Anzahl">
                </div>
                <div><label for="working-day-ets" class="block text-sm font-medium text-gray-700">Wieviele ETs hast du heute in deinem Team vereinbart?</label><div class="flex items-center gap-4"><input type="number" id="working-day-ets" class="modern-input mt-1 flex-grow" placeholder="Anzahl"><p id="working-day-et-soll" class="text-sm text-gray-500 mt-1 flex-shrink-0"></p></div></div>
                <div><label for="working-day-notiz" class="block text-sm font-medium text-gray-700">Notizen</label><textarea id="working-day-notiz" rows="4" class="modern-input mt-1"></textarea></div>
                <div class="pt-4 flex justify-end"><button type="submit" id="save-working-day-btn" class="bg-skt-blue text-white font-semibold py-2 px-5 rounded-lg hover:bg-skt-blue-light transition-colors">Speichern</button></div>
            </form>
        </div>
    </div>
    <!-- NEU: Modal für den Businessplan -->
    <div id="business-plan-modal" class="modal-overlay">
        <div class="modal-box bg-white rounded-lg shadow-xl p-8 m-4 max-w-4xl w-full relative max-h-[90vh] flex flex-col">
             <button id="close-business-plan-btn" class="absolute top-2 right-3 text-3xl text-gray-400 hover:text-skt-blue">&times;</button>
             <h3 class="text-2xl font-bold text-skt-blue mb-6">Mein Businessplan</h3>
             <form id="business-plan-form" class="flex-grow flex flex-col min-h-0">
                <input type="hidden" id="business-plan-user-id">
                 <!-- NEU: Strukturierte Formularfelder anstelle des Editors -->
                 <div class="space-y-4 overflow-y-auto pr-4 -mr-4 flex-grow">
                     <div>
                         <label for="bp-vision" class="block text-sm font-medium text-gray-700">Was ist deine Vision?</label>
                         <textarea id="bp-vision" rows="2" class="modern-input mt-1"></textarea>
                     </div>
                     <div>
                         <label for="bp-erstes-ziel" class="block text-sm font-medium text-gray-700">Was ist dein erstes großes Ziel auf diesem Weg?</label>
                         <input type="text" id="bp-erstes-ziel" class="modern-input mt-1">
                     </div>
                     <div>
                         <label for="bp-warum-ziel" class="block text-sm font-medium text-gray-700">Warum möchtest du dieses Ziel erreichen?</label>
                         <textarea id="bp-warum-ziel" rows="2" class="modern-input mt-1"></textarea>
                     </div>
                     <div>
                         <label for="bp-veraenderung" class="block text-sm font-medium text-gray-700">Was verändert sich für dich, wenn du dieses Ziel erreicht hast?</label>
                         <textarea id="bp-veraenderung" rows="2" class="modern-input mt-1"></textarea>
                     </div>
                     <div>
                         <label for="bp-wann-ziel" class="block text-sm font-medium text-gray-700">Wann willst du dieses Ziel erreichen?</label>
                         <input type="date" id="bp-wann-ziel" class="modern-input mt-1">
                     </div>
                     <div>
                         <label class="block text-sm font-medium text-gray-700">Welche konkreten Schritte musst du umsetzen, um dieses Ziel zu erreichen?</label>
                         <div id="bp-schritte-container" class="mt-2 space-y-2">
                             <!-- Schritte werden hier dynamisch per JS eingefügt -->
                         </div>
                         <button type="button" id="bp-add-schritt-btn" class="mt-2 text-sm text-skt-blue hover:underline"><i class="fas fa-plus mr-1"></i>Aufgabe hinzufügen</button>
                     </div>
                 </div>
                <div class="pt-6 flex justify-end space-x-3">
                    <button type="button" id="cancel-business-plan-btn" class="bg-gray-200 text-gray-800 font-semibold py-2 px-5 rounded-lg hover:bg-gray-300 transition-colors">Abbrechen</button>
                    <button type="submit" id="save-business-plan-btn" class="bg-skt-blue text-white font-semibold py-2 px-5 rounded-lg hover:bg-skt-blue-light transition-colors flex items-center justify-center" style="min-width: 110px;">
                        <span id="save-bp-btn-text">Speichern</span>
                        <div class="loader-small hidden"></div>
                    </button>
                </div>
             </form>
        </div>
    </div>
    <!-- Lodash für Hilfsfunktionen wie _.debounce -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.21/lodash.min.js"></script>
    <!-- NEU: Marked.js für Markdown-Rendering -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <!-- NEU: Quill Rich Text Editor -->
    <!-- Workaround für DOMNodeInserted Deprecation Warning -->
    <script>
        // Überschreibe addEventListener für DOMNodeInserted, um die Deprecation-Warnung zu vermeiden
        (function() {
            const originalAddEventListener = EventTarget.prototype.addEventListener;
            EventTarget.prototype.addEventListener = function(type, listener, options) {
                // Ignoriere DOMNodeInserted Events stillschweigend
                if (type === 'DOMNodeInserted' || type === 'DOMNodeRemoved' || type === 'DOMSubtreeModified') {
                    // Verwende stattdessen einen MutationObserver als Fallback
                    if (this.nodeType === Node.ELEMENT_NODE) {
                        const observer = new MutationObserver((mutations) => {
                            // Simuliere das alte Event-Verhalten für Quill
                            mutations.forEach(() => {
                                if (typeof listener === 'function') {
                                    listener.call(this, { type: type, target: this });
                                }
                            });
                        });
                        observer.observe(this, { 
                            childList: true, 
                            subtree: type === 'DOMSubtreeModified' || type === 'DOMNodeInserted'
                        });
                        return;
                    }
                }
                // Für alle anderen Events: normale Funktionalität
                return originalAddEventListener.call(this, type, listener, options);
            };
        })();
    </script>
    <script src="https://cdn.quilljs.com/1.3.7/quill.min.js"></script>
    <!-- NEU: Signature Pad für die Zeichenfunktion -->
    <script src="https://cdn.jsdelivr.net/npm/signature_pad@4.1.7/dist/signature_pad.umd.min.js"></script>
    <!-- NEU: D3.js für die Netzwerkdarstellung -->
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <!-- NEU: ApexCharts für moderne Charts -->
    <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
    <!-- NEU: SortableJS für Drag-and-Drop im Kanban-Board -->
    <script src="https://cdn.jsdelivr.net/npm/sortablejs@latest/Sortable.min.js"></script>
    <script type="module" src="main.js"></script>
</body>
</html>